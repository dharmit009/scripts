#!/bin/bash 

cleanup(){
	if [ -e "downloads.html" ] || [ -e "strap.sh" ];
	then 
		rm downloads.html strap.sh -rf;
	fi 
}


cleanup

wget --https-only https://blackarch.org/strap.sh --quiet 
wget --https-only https://blackarch.org/downloads.html --quiet 


if [ -e "downloads.html" ] 
then 
	chmod +rwx downloads.html
	extracted_cmd=$( cat downloads.html | grep "echo" | grep sha1sum | cut -d ">" -f "1" --complement | cut -d "<" -f "1" );
	echo $extracted_cmd;
	okay_or_not=$( eval $extracted_cmd | cut -d ' ' -f '1' --complement );
	echo $okay_or_not;
	if [ "$okay_or_not" = "OK" ] && [ -e "strap.sh" ] 
	then 
		chmod +x strap.sh 
		eval sudo ./strap.sh 
		echo "DONE"; 
	fi 
fi 

cleanup



